server:
  # Включаем режим HA
  ha:
    enabled: true
    replicas: 3
    # Конфигурация бэкенда Consul
    config: |
      ui = true

      listener "tcp" {
        tls_disabled = 1
        address = "[::]:8200"
        cluster_address = "[::]:8201"
      }

      storage "consul" {
      # Адрес сервиса Consul (обычно consul-server в вашем namespace)
        address = "consul-server.consul.svc.cluster.local:8500"
        path = "vault/"
      }

      service_registration "consul" {
        address = "consul-server.consul.svc.cluster.local:8500"
      }
  dataStorage:
    size: 10Gi
    storageClass: "yc-network-hdd" # Обязательно для YC

  image:
    repository: "mirror.gcr.io/hashicorp/vault"
    tag: "1.13.1"

injector:
  enabled: true